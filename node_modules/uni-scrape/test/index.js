'use strict';
/* eslint-disable import/no-extraneous-dependencies */

import * as chai from 'chai';
import fs from 'fs';

// module
import uniScrape from '../src/index';

// fixtures
import resultProfile from './fixtures/profile_result';
import profileTemplate from './fixtures/public_profile.json';

const html = fs.readFileSync('./test/fixtures/profile.html', 'utf8');
// const url = 'https://de.linkedin.com/in/julianamelung';

const expect = chai.expect;


describe('parser', () => {
  it('should build a parser', done => {
    const parser = uniScrape(profileTemplate);
    console.log(parser);
    expect(parser).to.be.a('function');
    done();
  });

  it('Should parse a profile', done => {
    const parser = uniScrape(profileTemplate);
    parser(html).then(profile => {
      expect(profile).to.eql(resultProfile);
      done();
    }).catch(done);
  });
});
